{"version":3,"file":"notification-banner.mjs","sources":["../../../../src/govuk/components/notification-banner/notification-banner.mjs"],"sourcesContent":["import { mergeConfigs } from '../../common/index.mjs'\nimport { normaliseDataset } from '../../common/normalise-dataset.mjs'\nimport { ElementError } from '../../errors/index.mjs'\nimport { GOVUKFrontendComponent } from '../../govuk-frontend-component.mjs'\n\n/**\n * Notification Banner component\n *\n * @preserve\n */\nexport class NotificationBanner extends GOVUKFrontendComponent {\n  /** @private */\n  $module\n\n  /**\n   * @private\n   * @type {NotificationBannerConfig}\n   */\n  config\n\n  /**\n   * @param {Element} $module - HTML element to use for notification banner\n   * @param {NotificationBannerConfig} [config] - Notification banner config\n   */\n  constructor($module, config) {\n    super()\n\n    if (!($module instanceof HTMLElement)) {\n      throw new ElementError($module, {\n        componentName: 'Notification banner',\n        identifier: '$module'\n      })\n    }\n\n    this.$module = $module\n\n    this.config = mergeConfigs(\n      NotificationBanner.defaults,\n      config || {},\n      normaliseDataset($module.dataset)\n    )\n\n    this.setFocus()\n  }\n\n  /**\n   * Focus the element\n   *\n   * If `role=\"alert\"` is set, focus the element to help some assistive technologies\n   * prioritise announcing it.\n   *\n   * You can turn off the auto-focus functionality by setting `data-disable-auto-focus=\"true\"` in the\n   * component HTML. You might wish to do this based on user research findings, or to avoid a clash\n   * with another element which should be focused when the page loads.\n   *\n   * @private\n   */\n  setFocus() {\n    if (this.config.disableAutoFocus) {\n      return\n    }\n\n    if (this.$module.getAttribute('role') !== 'alert') {\n      return\n    }\n\n    // Set tabindex to -1 to make the element focusable with JavaScript.\n    // Remove the tabindex on blur as the component doesn't need to be focusable after the page has\n    // loaded.\n    if (!this.$module.getAttribute('tabindex')) {\n      this.$module.setAttribute('tabindex', '-1')\n\n      this.$module.addEventListener('blur', () => {\n        this.$module.removeAttribute('tabindex')\n      })\n    }\n\n    this.$module.focus()\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'govuk-notification-banner'\n\n  /**\n   * Notification banner default config\n   *\n   * @see {@link NotificationBannerConfig}\n   * @constant\n   * @default\n   * @type {NotificationBannerConfig}\n   */\n  static defaults = Object.freeze({\n    disableAutoFocus: false\n  })\n}\n\n/**\n * Notification banner config\n *\n * @typedef {object} NotificationBannerConfig\n * @property {boolean} [disableAutoFocus=false] - If set to `true` the\n *   notification banner will not be focussed when the page loads. This only\n *   applies if the component has a `role` of `alert` â€“ in other cases the\n *   component will not be focused on page load, regardless of this option.\n */\n"],"names":["NotificationBanner","GOVUKFrontendComponent","constructor","$module","config","HTMLElement","ElementError","componentName","identifier","mergeConfigs","defaults","normaliseDataset","dataset","setFocus","disableAutoFocus","getAttribute","setAttribute","addEventListener","removeAttribute","focus","moduleName","Object","freeze"],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACO,MAAMA,kBAAkB,SAASC,sBAAsB,CAAC;AAU7D;AACF;AACA;AACA;AACEC,EAAAA,WAAWA,CAACC,OAAO,EAAEC,MAAM,EAAE;AAC3B,IAAA,KAAK,EAAE,CAAA;AAAA,IAAA,IAAA,CAbTD,OAAO,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAMPC,MAAM,GAAA,KAAA,CAAA,CAAA;AASJ,IAAA,IAAI,EAAED,OAAO,YAAYE,WAAW,CAAC,EAAE;AACrC,MAAA,MAAM,IAAIC,YAAY,CAACH,OAAO,EAAE;AAC9BI,QAAAA,aAAa,EAAE,qBAAqB;AACpCC,QAAAA,UAAU,EAAE,SAAA;AACd,OAAC,CAAC,CAAA;AACJ,KAAA;IAEA,IAAI,CAACL,OAAO,GAAGA,OAAO,CAAA;IAEtB,IAAI,CAACC,MAAM,GAAGK,YAAY,CACxBT,kBAAkB,CAACU,QAAQ,EAC3BN,MAAM,IAAI,EAAE,EACZO,gBAAgB,CAACR,OAAO,CAACS,OAAO,CAClC,CAAC,CAAA;IAED,IAAI,CAACC,QAAQ,EAAE,CAAA;AACjB,GAAA;AAcAA,EAAAA,QAAQA,GAAG;AACT,IAAA,IAAI,IAAI,CAACT,MAAM,CAACU,gBAAgB,EAAE;AAChC,MAAA,OAAA;AACF,KAAA;IAEA,IAAI,IAAI,CAACX,OAAO,CAACY,YAAY,CAAC,MAAM,CAAC,KAAK,OAAO,EAAE;AACjD,MAAA,OAAA;AACF,KAAA;IAKA,IAAI,CAAC,IAAI,CAACZ,OAAO,CAACY,YAAY,CAAC,UAAU,CAAC,EAAE;MAC1C,IAAI,CAACZ,OAAO,CAACa,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAA;AAE3C,MAAA,IAAI,CAACb,OAAO,CAACc,gBAAgB,CAAC,MAAM,EAAE,MAAM;AAC1C,QAAA,IAAI,CAACd,OAAO,CAACe,eAAe,CAAC,UAAU,CAAC,CAAA;AAC1C,OAAC,CAAC,CAAA;AACJ,KAAA;AAEA,IAAA,IAAI,CAACf,OAAO,CAACgB,KAAK,EAAE,CAAA;AACtB,GAAA;AAkBF,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhGanB,kBAAkB,CAyEtBoB,UAAU,GAAG,2BAA2B,CAAA;AAzEpCpB,kBAAkB,CAmFtBU,QAAQ,GAAGW,MAAM,CAACC,MAAM,CAAC;AAC9BR,EAAAA,gBAAgB,EAAE,KAAA;AACpB,CAAC,CAAC;;;;"}