{% set menuButtonText = params.menuButtonText if params.menuButtonText else 'Menu' %}

<header class="govuk-header {{ params.classes if params.classes }}" role="banner" data-module="govuk-header"
  {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  <div class="govuk-header__container {{ params.containerClasses | default('govuk-width-container') }}">
    <div class="govuk-header__logo">
      <a href="{{ params.homepageUrl | default('/') }}" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          {#- We use an inline SVG for the crown so that we can cascade the
          currentColor into the crown whilst continuing to support older browsers
          which do not support external SVGs without a Javascript polyfill. This
          adds approximately 1kb to every page load.

          We use currentColour so that we can easily invert it when printing and
          when the focus state is applied. This also benefits users who override
          colours in their browser as they will still see the crown.

          The SVG needs `focusable="false"` so that Internet Explorer does not
          treat it as an interactive element - without this it will be
          'focusable' when using the keyboard to navigate. #}
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 32 30"
            height="30"
            width="32"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M20.18 9.41c-.39-.94.06-2.03 1.01-2.42.93-.38 2.02.07 2.41 1.02.39.94-.06 2.02-1 2.4-.95.39-2.03-.06-2.42-1Zm-4.88 4.25c-.95.39-1.4 1.48-1.01 2.42.39.94 1.47 1.39 2.42 1 .93-.38 1.38-1.47 1-2.4-.39-.94-1.47-1.4-2.41-1.02Zm12.26-.3c.93-.38 1.38-1.47 1-2.4-.39-.94-1.48-1.4-2.41-1.02-.95.39-1.4 1.48-1.01 2.42.39.94 1.47 1.39 2.42 1Zm.88 3.9c.39.94 1.47 1.39 2.42 1 .94-.38 1.38-1.47 1-2.4-.39-.94-1.48-1.4-2.41-1.02-.95.39-1.4 1.48-1.01 2.42ZM9.39 10.41c.95.39 2.03-.06 2.42-1 .39-.94-.06-2.03-1.01-2.42-.93-.38-2.02.07-2.41 1.02-.39.94.06 2.02 1 2.4Zm-4.96 2.95c.95.39 2.03-.06 2.42-1 .39-.94-.06-2.03-1.01-2.42-.93-.38-2.02.07-2.41 1.02-.39.94.06 2.02 1 2.4Zm-3.3 4.9c.95.39 2.03-.06 2.42-1 .39-.94-.06-2.03-1.01-2.42-.93-.38-2.02.07-2.41 1.02-.39.94.06 2.02 1 2.4ZM15.02 4.68c.07.09.15.17.24.24l-1.34 4.04v.02c-.06.2-.1.42-.1.64 0 1.09.81 2 1.86 2.15h.05c.09.01.18.02.27.02.09 0 .18 0 .27-.02h.05c1.05-.16 1.86-1.06 1.86-2.15 0-.22-.03-.44-.1-.64v-.02l-1.34-4.04c.09-.07.17-.15.24-.24s2.33 1.22 2.33 1.22V2.46l-2.33.74c-.06-.09-.14-.17-.23-.24S17.69 0 17.69 0h-3.36l.94 2.95c-.08.07-.16.15-.23.24s-2.33-.73-2.33-.73V5.9l2.33-1.23ZM32 21.19C30.67 23 29.38 25.55 28.33 30c-3.73-.53-7.91-.83-12.33-.83s-8.6.3-12.32.83c-1.06-4.45-2.35-7-3.67-8.81l2.5-.89c-.25 1.27-.29 1.86 0 2.68.41-.4.8-1.15 1.11-2.28l1.21 4.04c-.74-.51-1.31-.84-1.96-.85 1.15 2.49 2.6 3.13 3.53 2.95 1.14-.21 1.67-1.23 1.49-2.09-.26-1.22-1.52-1.54-2.1-.12-1.12-2.29.78-3 2-2.32-1.88-1.88-2.09-3.54-.58-5.56 2.11 1.62 2.14 3.22 1.19 5.47 1.23-1.41 3.16-.65 2.46 1.63-.89-1.38-2.07-.51-1.88.8.16 1.14 1.66 2.06 3.54 1.9 2.69-.24 2.85-2.1 2.92-3.63-.66-.12-1.85.49-2.87 1.92l-.37-4.28c1.1 1.15 2.11 1.37 3.22 1.4-.37-1.16-2.08-3.05-2.08-3.05h5.35s-1.7 1.9-2.08 3.05c1.11-.04 2.12-.25 3.22-1.4l-.37 4.28c-1.01-1.42-2.2-2.04-2.87-1.92.07 1.54.23 3.39 2.92 3.63 1.88.16 3.38-.76 3.54-1.9.19-1.31-.99-2.18-1.88-.8-.69-2.28 1.23-3.04 2.46-1.63-.95-2.25-.93-3.85 1.19-5.47 1.52 2.02 1.3 3.68-.58 5.56 1.22-.68 3.13.04 2 2.32-.59-1.42-1.84-1.1-2.1.12-.18.86.35 1.88 1.49 2.09.93.17 2.38-.47 3.53-2.95-.65.02-1.22.34-1.96.85l1.21-4.04c.31 1.13.7 1.88 1.11 2.28.28-.82.24-1.41-.01-2.68l2.5.89Z"
            ></path>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        {% if (params.productName) %}
        <span class="govuk-header__product-name">
          {{ params.productName }}
        </span>
        {% endif %}
      </a>
    </div>
    {% if params.serviceName or params.navigation  %}
    <div class="govuk-header__content">
    {% if params.serviceName %}
    {% if params.serviceUrl %}
      <a href="{{ params.serviceUrl }}" class="govuk-header__link govuk-header__service-name">
        {{ params.serviceName }}
      </a>
    {% else%}
      <span class="govuk-header__service-name">
        {{ params.serviceName }}
      </span>
    {% endif %}
    {% endif %}
    {% if params.navigation %}
    <nav aria-label="{{ params.navigationLabel | default(menuButtonText) }}" class="govuk-header__navigation {{ params.navigationClasses if params.navigationClasses }}">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation"{%- if params.menuButtonLabel and params.menuButtonLabel != menuButtonText %} aria-label="{{ params.menuButtonLabel }}"{% endif %} hidden>{{ menuButtonText }}</button>

      <ul id="navigation" class="govuk-header__navigation-list">
        {% for item in params.navigation %}
          {% if item.text or item.html %}
            <li class="govuk-header__navigation-item{{ ' govuk-header__navigation-item--active' if item.active }}">
              {% if item.href %}
                <a class="govuk-header__link" href="{{ item.href }}"{% for attribute, value in item.attributes %} {{attribute}}="{{value}}"{% endfor %}>
              {% endif %}
                {{ item.html | safe if item.html else item.text }}
              {% if item.href %}
                </a>
              {% endif %}
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
    {% endif %}
    </div>
    {% endif %}
  </div>
</header>
